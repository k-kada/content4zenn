---
title: "Macでバッテリーの情報を取得する方法をまとめてみた"
emoji: "🔋"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["Mac","battery","cli"]
published: false
---

# 概要
使い慣れていないのとよく忘れるのでMacのバッテリー情報取得に関することをまとめました。

# 環境
MacBook Air (Retina, 13-inch, 2019)
macOS Big Sur

# GUI編
`システム情報`を起動して`ハードウェア`内の`電源`を選択するとバッテリー情報が表示される。
ここで確認できる情報は`完全充電時の容量（mAh）`と`バッテリーの状態（%）`くらい。

使用状況履歴は`システム環境設定`を起動して`バッテリー`、`使用状況履歴`と選択。過去24時間と10日間のバッテリー使用状況が確認できる。

ちなみに、Big Surになってからメニューバーのバッテリーアイコンをクリックした際に残量をパーセント表示する項目がなくなっている。`システム環境設定`の`Dockとメニューバー`を選択した際の`バッテリー`という項目に含まれる様になったので地味に不便。

# CLI編
もう少し情報を知りたいこともあるのでCLIで確認する方法を調べました。

パッと調べて出てきたのは下記2つのコマンド。ターミナル上で実行してください。
```
pmset -g ps
ioreg -l
```
psの部分はbattに変えても同じ値が出てきました。短いので今回はpsを採用。

`ioreg`はこのまま使用するとバッテリー以外にも大量に情報が出てきてしまうので`grep Capacity`と組み合わせるのを見かけるのですが、これでもまだ色々出てくるので1つの項目ごとに表示することにしてみました。
```
ioreg -l | grep \ \"MaxCapacity | sed -e 's/[ \|]//g'
ioreg -l | grep \ \"CurrentCapacity | sed -e 's/[ \|]//g'
ioreg -l | grep \ \"DesignCapacity | sed -e 's/[ \|]//g'
ioreg -l | grep \ \"LegacyBatteryInfo | sed -e 's/[ \|]//g'
ioreg -l | grep \ \"BatteryData | sed -e 's/[ \|]//g'
```
grepとか正規表現の書き方変じゃねと思われる方もいるかもしれませんが、得意じゃないんです許してください。

上記で一番情報が最も多いのは`BatteryData`ですが、何を示しているのかわからない部分も多いので`LagacyBatteryInfo`が良さそうと思ったのですが設計容量(Design Capacity)が含まれていないので上から3つを使うのが良さそうです。

`BatteryData`の中身について詳しく知りたいところですが、今回の記事では情報を取得することろまでに留めておきます。
